{"version":3,"sources":["webpack://mailru-auth-gate/webpack/bootstrap","webpack://mailru-auth-gate/./src/lib.ts","webpack://mailru-auth-gate/./node_modules/wormhole.js/src/emitter.js","webpack://mailru-auth-gate/./src/config.ts","webpack://mailru-auth-gate/./src/constants.ts","webpack://mailru-auth-gate/./src/webauthn-utils.ts","webpack://mailru-auth-gate/./src/_core.ts","webpack://mailru-auth-gate/./src/form.ts","webpack://mailru-auth-gate/./src/popup/popup.xml","webpack://mailru-auth-gate/./src/popup/popup.scss?75da","webpack://mailru-auth-gate/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://mailru-auth-gate/./src/popup/popup.scss","webpack://mailru-auth-gate/./node_modules/css-loader/dist/runtime/api.js","webpack://mailru-auth-gate/./src/gate.ts","webpack://mailru-auth-gate/./node_modules/wormhole.js/src/cors.js","webpack://mailru-auth-gate/./node_modules/wormhole.js/src/get-own.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","lib","extend","target","arguments","length","source","noop","body","document","getElementsByTagName","head","hasClasslist","documentElement","on","node","eventType","handler","_bindListner","off","preventDefault","event","returnValue","id","getElementById","newElement","tag_name","createElement","isNode","nodeType","hasParent","parent","checker","hasClass","parentNode","className","classList","contains","indexOf","addClass","class_names","class_names_arr","split","add","removeClass","remove","replace","RegExp","validate","data","config","type","data_item","config_item","avalible","both","_data","require","console","error","capitalize","input","charAt","toUpperCase","slice","defaultHandler","window","this","addEventListener","relayEvents","from","to","events","relay","e","next","emit","phProject","__PH","_","project","phRadar","radar","apply","phTimers","param","timers","getListeners","obj","Emitter","fn","push","list","splice","one","proxy","args","nargs","listeners","concat","hostname","pathname","version","allowOpenDomain","IS_MAIL_RU_RE","test","location","href","top","isTopMost","IS_ACCOUNT_HOST","IS_LOGIN_PATHNAME_RE","isMobile","innerHeight","innerWidth","url","login","choice","settings","account_host","DEFAULT_ACCOUNT_HOST","accountHostParam","search","filter","accountHost","setSettings","props","IS_HTTP_LINK","normalizeProps","getSettings","properties","params","paramName","getParam","Array","isArray","IS_NOT_REPLACED","IS_MAIL_RU_RE_SOURCE","IS_ACCOUNT_HOST_SOURCE","charToCode","chr","charCodeAt","concatByteToStr","str","byte","String","fromCharCode","Uint8Array","atob","buffer","btoa","reduce","decodeObjectId","decodeBuffer","method","res","JSON","stringify","response","authAssertionResp","rawId","encodeBuffer","clientDataJSON","authenticatorData","signature","userHandle","parse","publicKey","challenge","allowCredentials","map","Error","authGate","cors","windowCors","form","define","AuthGate","invoke","func","payload","serialize","Promise","resolve","reject","then","callback","__AG","_config","show","hide","insert","el","__iframe","unMount","isVisible","__isVisible","isInserted","__isInserted","focus","field","err","ERRCODES","ERR_NOTVISIBLE","isLoaded","height","email","credential","resp","serializedResp","serializeGetCredentialsResponse","message","amd","getQueryVariable","variable","vars","substring","pair","decodeURIComponent","Form","__isLoading","currentSuccessRedirect","openType","changedType","redirect_to_login","mobile_redirect","redirectToLogin","Date","now","__isLoadervisible","newSuccessRedirect","success_redirect","isParamsEqual","__init","__reload","__overlay","__frame","__setUrl","__breakLoad","wrapper","modal","getCredentials","options","navigator","credentials","catch","isUserVerifyingPlatformAuthenticatorAvailable","PublicKeyCredential","element","removeChild","__createElement","popup","src","onoverlay","__layout","children","__loader","__showLoader","__loadHandler","appendChild","__resize","width","keyCode","__addOverlay","__hide","srcElement","size","resize","marginDirection","style","__resetEmail","force","__getAccountHost","queryHost","settingsHost","devmail","preview","parseInt","isNaN","encodeURIComponent","__hideLoader","__showCounter","render","content","fragment","createDocumentFragment","innerHTML","__fest_context","__fest_chunk","__fest_select","__fest_iterator","__fest_to","__fest_fn","__fest_params","___fest_log_error","__fest_self","__fest_buf","__fest_chunks","__fest_attrs","__fest_html","__fest_blocks","__fest_htmlchars","__fest_htmlchars_test","__fest_htmlhash","\"","__fest_escapeHTML","__fest_replaceHTML","i18n","__fest_log_error","msg","__fest_call","cp","__fest_error","Function","api","default","exported","locals","memo","isOldIE","Boolean","all","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","item","base","count","index","css","media","sourceMap","references","updater","addStyle","insertStyleElement","attributes","nonce","keys","forEach","setAttribute","textStore","replaceText","replacement","join","applyToSingletonTag","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","applyToTag","removeAttribute","unescape","firstChild","singleton","singletonCounter","update","styleIndex","removeStyleElement","newObj","lastIdentifiers","newList","toString","newLastIdentifiers","_i","_index","___CSS_LOADER_API_IMPORT___","useSourceMap","cssMapping","sourceMapping","base64","sourceURLs","sources","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","Cors","allowAccess","setExpando","load","dataValid","status","auth","redirectUrl","reload","deserialize","setMaxHeight","maxHeightData","decodedResp","deserializeGetCredentialsResponse","getOwn","_corsId","_corsExpando","_corsCallback","_parseJSON","_stringifyJSON","_allowAccess","_onmessage","evt","origin","targetOrigin","originalEvent","substr","cmd","send","contentWindow","postMessage","expando","attachEvent","prop"],"mappings":"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","file":"authGate.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","import {ILib} from '../types';\n\nconst lib: ILib = {\n\textend(target, ...sources) {\n\t\ttarget = target || {};\n\n\t\tfor (let i = 1, l = arguments.length; i < l; i++) {\n\t\t\tconst source = arguments[i];\n\t\t\tfor (const p in source) {\n\t\t\t\ttarget[p] = source[p];\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t},\n\tnoop() {},\n\n\tbody: document.getElementsByTagName('body')[0],\n\thead: document.getElementsByTagName('head')[0],\n\thasClasslist: 'classList' in document.documentElement,\n\n\ton(node, eventType, handler) {\n\t\tlib._bindListner(true, node, eventType, handler);\n\t},\n\n\toff(node, eventType, handler) {\n\t\tlib._bindListner(false, node, eventType, handler);\n\t},\n\n\tpreventDefault(event) {\n\t\tevent.preventDefault ? event.preventDefault() : event.returnValue = false;\n\t},\n\n\tid(id) {\n\t\treturn document.getElementById(id);\n\t},\n\n\tnewElement(tag_name) {\n\t\treturn document.createElement(tag_name);\n\t},\n\n\tisNode(node) {\n\t\treturn node && node.nodeType == 1;\n\t},\n\n\thasParent(node, parent) {\n\t\tconst checker = lib.isNode(parent) ? function(node, parent) {\n\t\t\treturn node == parent;\n\t\t} : function(node, parent) {\n\t\t\treturn lib.hasClass(node, parent);\n\t\t};\n\t\tlet p = node.parentNode;\n\n\t\twhile (p) {\n\t\t\tif (checker(p, parent)) {\n\t\t\t\treturn p;\n\t\t\t}\n\t\t\tp = p.parentNode;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t *\n\t * Detect class in className on node\n\t *\n\t * @expose\n\t */\n\thasClass(node, className) {\n\t\treturn lib.isNode(node) && node.classList ? node.classList.contains(className) : !!~(' ' + node.className + ' ').indexOf(' ' + className + ' ');\n\t},\n\n\t/**\n\t *\n\t * Add one or more className from DOM Element\n\t *\n\t * @expose\n\t */\n\taddClass(node, class_names) {\n\t\tif (!lib.isNode(node)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (lib.hasClasslist) {\n\t\t\tconst class_names_arr = class_names.split(' ');\n\n\t\t\tif (class_names_arr.length == 1) {\n\t\t\t\tnode.classList.add(class_names_arr[0]);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < class_names_arr.length; i++) {\n\t\t\t\tnode.classList.add(class_names_arr[i]);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!lib.hasClass(node, class_names)) {\n\t\t\tnode.className += ` ${class_names}`;\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * Remove one className from DOM Element\n\t *\n\t * @expose\n\t */\n\tremoveClass(node, class_names) {\n\t\tif (!lib.isNode(node)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (lib.hasClasslist) {\n\t\t\tnode.classList.remove(class_names);\n\n\t\t\treturn;\n\t\t}\n\n\t\t/* if !lib.hasClasslist */\n\t\tnode.className = node.className.replace(new RegExp('(^|\\\\s)' + class_names + '(\\\\s|$)', 'g'), '$1');\n\t},\n\n\t/**\n\t *\n\t * @expose\n\t */\n\tvalidate(data, config) {\n\t\tconst _data = {};\n\t\tconst is_valid = true;\n\t\tlet require = false;\n\t\tlet type;\n\t\tlet data_item;\n\t\tlet config_item;\n\t\tlet avalible;\n\t\tlet both;\n\n\t\tfor (const i in config) {\n\n\t\t\tif (typeof config[i] !== 'string') {\n\t\t\t\tdata_item = data.hasOwnProperty(i) ? data[i] : false;\n\t\t\t\tconfig_item = config[i];\n\n\t\t\t\trequire = config_item.require ? true : false;\n\t\t\t\ttype = config_item.type ? config_item.type : console.error('Undefined type of ' + i);\n\t\t\t\tavalible = config_item.avalible ? config_item.avalible : false;\n\n\t\t\t\tif (!data_item) {\n\t\t\t\t\t// If strict EXIT\n\t\t\t\t\tif (require) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t/* else check next property */\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/* If found data_item */\n\t\t\t\tboth = (type && typeof data_item == type) && (avalible && avalible.indexOf(data_item) !== -1);\n\t\t\t\ttype = (type && typeof data_item == type) && !avalible;\n\n\t\t\t\tif (!both && !type) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t_data[i] = data_item;\n\n\t\t\t} else if (data.hasOwnProperty(i) && typeof data[i] == config[i]) {\n\n\t\t\t\t_data[i] = data[i];\n\n\t\t\t}\n\t\t}\n\n\t\treturn _data;\n\t},\n\n\tcapitalize(input) {\n\t\treturn input.charAt(0).toUpperCase() + input.slice(1);\n\t},\n\n\t_bindListner(add, node, eventType, handler) {\n\t\tlet defaultHandler;\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tdefaultHandler = function(event) {\n\t\t\tevent = event || window.event;\n\n\t\t\thandler.call(this, event);\n\t\t};\n\n\t\tif (node.addEventListener) {\n\t\t\tnode[add ? 'addEventListener' : 'removeEventListener'](eventType, defaultHandler, false);\n\t\t} else {\n\t\t\tnode[add ? 'attachEvent' : 'detachEvent']('on' + eventType, defaultHandler);\n\t\t}\n\t},\n\n\trelayEvents(from, to, events) {\n\t\tlet event;\n\t\tconst relay = function(to, event) {\n\t\t\treturn function(e, next) {\n\t\t\t\tto.emit(event);\n\t\t\t};\n\t\t};\n\n\t\tfor (let i = 0, l = events.length; i < l; i++) {\n\t\t\tevent = events[i];\n\t\t\tfrom.on(event, (relay)(to, event));\n\t\t}\n\t},\n\n\tphProject() {\n\t\ttry {\n\t\t\treturn window.__PH._.project;\n\t\t} catch (e) {\n\t\t\treturn '';\n\t\t}\n\t},\n\tphRadar(...args) {\n\t\ttry {\n\t\t\treturn window.__PH._.radar.apply(this, arguments);\n\t\t} catch (e) {\n\t\t}\n\t},\n\tphTimers(name?, param?) {\n\t\ttry {\n\t\t\tif (typeof name === 'string' && typeof param === 'number') {\n\t\t\t\twindow.__PH._.timers[name] = param;\n\t\t\t}\n\n\t\t\treturn window.__PH._.timers;\n\t\t} catch (e) {\n\t\t\treturn {};\n\t\t}\n\t},\n};\n\nexport default lib;\n","define([], function () {\n\tvar __emitter__ = '__emitter__';\n\n\tfunction getListeners(obj, name) {\n\t\tif (obj[__emitter__] === void 0) {\n\t\t\tobj[__emitter__] = {};\n\t\t}\n\n\t\tobj = obj[__emitter__];\n\n\t\tif (obj[name] === void 0) {\n\t\t\tobj[name] = [];\n\t\t}\n\n\t\treturn obj[name];\n\t}\n\n\n\t/**\n\t * @class Emitter\n\t * @desc  Микро-излучатель\n\t */\n\tfunction Emitter() {\n\t}\n\n\n\tEmitter.fn = Emitter.prototype = /** @lends Emitter.prototype */ {\n\t\t/**\n\t\t * Подписаться на событие\n\t\t * @param   {String}   name\n\t\t * @param   {Function} fn\n\t\t * @returns {Emitter}\n\t\t */\n\t\ton: function (name, fn) {\n\t\t\tvar list = getListeners(this, name);\n\t\t\tlist.push(fn);\n\t\t\treturn this;\n\t\t},\n\n\n\t\t/**\n\t\t * Отписаться от событие\n\t\t * @param   {String}   name\n\t\t * @param   {Function} fn\n\t\t * @returns {Emitter}\n\t\t */\n\t\toff: function (name, fn) {\n\t\t\tif (name === void 0) {\n\t\t\t\tdelete this[__emitter__];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar list = getListeners(this, name),\n\t\t\t\t\ti = list.length;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\t// Ищем слушателя и удаляем (indexOf - IE > 8)\n\t\t\t\t\tif (list[i] === fn) {\n\t\t\t\t\t\tlist.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\n\t\t/**\n\t\t * Подписаться на событие и отписаться сразу после его получения\n\t\t * @param   {String}   name\n\t\t * @param   {Function} fn\n\t\t * @returns {Emitter}\n\t\t */\n\t\tone: function (name, fn) {\n\t\t\tvar proxy = function () {\n\t\t\t\tthis.off(name, proxy);\n\t\t\t\treturn fn.apply(this, arguments);\n\t\t\t};\n\n\t\t\treturn this.on(name, proxy);\n\t\t},\n\n\n\t\t/**\n\t\t * Распространить данные\n\t\t * @param   {String}   name\n\t\t * @param   {*}        [args]\n\t\t */\n\t\temit: function (name, args) {\n\t\t\tvar listeners = getListeners(this, name),\n\t\t\t\ti = listeners.length,\n\t\t\t\tnargs\n\t\t\t;\n\n\t\t\targs = (arguments.length === 1) ? [] : [].concat(args);\n\t\t\tnargs = args.length;\n\n\t\t\twhile (i--) {\n\t\t\t\tif (nargs === 0) {\n\t\t\t\t\tlisteners[i].call(this);\n\t\t\t\t}\n\t\t\t\telse if (nargs === 1){\n\t\t\t\t\tlisteners[i].call(this, args[0]);\n\t\t\t\t}\n\t\t\t\telse if (nargs === 2){\n\t\t\t\t\tlisteners[i].call(this, args[0], args[1]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlisteners[i].apply(this, args);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/**\n\t * Подмешать методы\n\t * @param   {*}  target\n\t * @returns {*}\n\t * @method\n\t */\n\tEmitter.apply = function (target) {\n\t\ttarget.on = Emitter.fn.on;\n\t\ttarget.off = Emitter.fn.off;\n\t\ttarget.one = Emitter.fn.one;\n\t\ttarget.emit = Emitter.fn.emit;\n\n\t\treturn target;\n\t};\n\n\n\tEmitter.getListeners = getListeners;\n\n\n\t// Export\n\treturn Emitter;\n});\n","import lib from './lib';\nimport {DEFAULT_ACCOUNT_HOST, IS_ACCOUNT_HOST, IS_HTTP_LINK, IS_LOGIN_PATHNAME_RE, IS_MAIL_RU_RE} from './constants';\n\nconst MOBILE_TRESHOLD = 510;\n\nfunction isTopMost() {\n\ttry {\n\t\treturn window.top.location === window.location;\n\t} catch {\n\t\treturn false;\n\t}\n}\n\nfunction isAccountLogin() {\n\tconst {\n\t\thostname,\n\t\tpathname,\n\t} = window.location;\n\n\treturn IS_ACCOUNT_HOST.test(hostname) && IS_LOGIN_PATHNAME_RE.test(pathname);\n}\n\nconst config: any = {\n\tversion: AG_VERSION,\n\tallowOpenDomain: IS_MAIL_RU_RE.test(window.location.href),\n\tparent: isTopMost() || !isAccountLogin(),\n\tisMobile: window.innerHeight < MOBILE_TRESHOLD || window.innerWidth < MOBILE_TRESHOLD,\n\turl: {\n\t\tlogin: '/login/?mode=simple',\n\t\tchoice: '/login/?mode=simple&action=choice',\n\t},\n\tsettings: {\n\t\taccount_host: DEFAULT_ACCOUNT_HOST,\n\t\ttype: 'login',\n\t},\n};\n\nconst accountHostParam = window.location.search.slice(1)\n\t.split('&')\n\t.filter((p) => {\n\t\tconst v = p.split('=');\n\t\treturn v[0] === 'account_host';\n\t})[0];\nconst accountHost = accountHostParam && accountHostParam.split('=')[1];\nif (accountHost) {\n\tconfig.settings.account_host = accountHost;\n}\n\nconfig.setSettings = function(settings) {\n\tconst normalizeProps = function(props) {\n\t\tconst switchers = 'modal,email_expand,allow_external,custom_registration,mobile_redirect,redirect_to_login,';\n\t\tconst checkProtocol = 'success_redirect';\n\n\t\tfor (const name in props) {\n\t\t\tif (switchers.indexOf(name + ',') > -1) { /* if in switchers, then set 1 or delete */\n\t\t\t\tif (props[name]) {\n\t\t\t\t\tprops[name] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tdelete props[name];\n\t\t\t\t}\n\t\t\t} else if (props[name] === '' || (name == checkProtocol && !(IS_HTTP_LINK.test(props[name])))) { /* delete empty props or check protocol in links */\n\t\t\t\tdelete props[name];\n\t\t\t}\n\t\t}\n\n\t\treturn props;\n\t};\n\n\tlib.extend(config.settings, normalizeProps(settings));\n\n\treturn settings;\n};\n\nconfig.getSettings = function(properties) {\n\tlet params;\n\tconst getParam = function(property) {\n\t\treturn config.settings.hasOwnProperty(property) ? config.settings[property] : void 0;\n\t};\n\tconst pushParam = function(paramName) {\n\t\tparams[paramName] = getParam(paramName);\n\t};\n\n\tif (properties === 'all') /* all settings in new hash */ {\n\t\treturn lib.extend({}, config.settings);\n\n\t} else if (typeof properties === 'string') /* param by name */ {\n\t\treturn getParam(properties);\n\n\t} else if (Array.isArray(properties)) /* by array of params */ {\n\t\tparams = {};\n\n\t\tfor (let i = 0, l = properties.length; i < l; i++) {\n\t\t\tpushParam(properties[i]);\n\t\t}\n\n\t\treturn params;\n\t}\n\n\treturn;\n};\n\nexport default config;\n","const IS_NOT_REPLACED = /^REPLACE:/;\n\n/**\n * фильтруем не http(s)-ссылки\n */\nconst IS_HTTP_LINK = /^(https?:)?\\/\\//;\n\n/**\n * проверяем, является ли эта ссылка ссылкой на mail.ru проекты\n * для дева разрешаем ещё и http://localhost.mail.ru для тестирования\n */\nconst IS_MAIL_RU_RE_SOURCE_DEFAULT = '^https?:\\\\/\\\\/([a-zA-Z0-9\\\\-.]*\\\\.)?(dev)?mail\\\\.ru(:\\\\d+)?(?:[\\\\/?].*)?$';\n\nlet IS_MAIL_RU_RE_SOURCE = 'REPLACE:is.mail.ru.re:';\nif (IS_NOT_REPLACED.test(IS_MAIL_RU_RE_SOURCE)) {\n\tIS_MAIL_RU_RE_SOURCE = IS_MAIL_RU_RE_SOURCE_DEFAULT;\n}\nconst IS_MAIL_RU_RE = new RegExp(IS_MAIL_RU_RE_SOURCE);\n\n/**\n * фильтруем хост аккаунта\n */\nconst IS_ACCOUNT_HOST_SOURCE_DEFAULT = '^([a-zA-Z0-9\\\\-.]*\\\\.)?account((\\\\.(omega|branch))?\\\\.test)?\\\\.(dev)?mail\\\\.ru$';\nlet IS_ACCOUNT_HOST_SOURCE = 'REPLACE:is.account.host.re:';\nif (IS_NOT_REPLACED.test(IS_ACCOUNT_HOST_SOURCE)) {\n\tIS_ACCOUNT_HOST_SOURCE = IS_ACCOUNT_HOST_SOURCE_DEFAULT;\n}\nconst IS_ACCOUNT_HOST = new RegExp(IS_ACCOUNT_HOST_SOURCE);\n\n/**\n * домен аккаунта по умолчанию\n */\nconst DEFAULT_ACCOUNT_HOST_DEFAULT = 'account.mail.ru';\nlet DEFAULT_ACCOUNT_HOST = 'REPLACE:account.mail.ru:';\nif (IS_NOT_REPLACED.test(DEFAULT_ACCOUNT_HOST)) {\n\tDEFAULT_ACCOUNT_HOST = DEFAULT_ACCOUNT_HOST_DEFAULT;\n}\n\nconst IS_LOGIN_PATHNAME_RE = /^\\/login\\/?$/;\n\nexport {\n\tIS_HTTP_LINK,\n\tIS_MAIL_RU_RE,\n\tIS_ACCOUNT_HOST,\n\tDEFAULT_ACCOUNT_HOST,\n\tIS_LOGIN_PATHNAME_RE,\n};\n","import lib from './lib';\n\nfunction charToCode(chr: string) {\n\treturn chr.charCodeAt(0);\n}\n\nfunction concatByteToStr(str: string, byte: number) {\n\treturn str + String.fromCharCode(byte);\n}\n\nexport function decodeBuffer(value: string): ArrayBuffer {\n\t// @ts-ignore\n\treturn Uint8Array.from(atob(value), charToCode);\n}\n\nexport function encodeBuffer(buffer: ArrayBuffer): string {\n\treturn btoa(new Uint8Array(buffer).reduce(concatByteToStr, ''));\n}\n\nfunction decodeObjectId<T extends {id: string}>(obj: T): T & {id: BufferSource} {\n\treturn {\n\t\t// @ts-ignore\n\t\t...obj,\n\t\tid: decodeBuffer(obj.id),\n\t};\n}\n\nexport function serialize(method, obj) {\n\tconst res = lib.extend({}, obj);\n\n\treturn JSON.stringify(res);\n}\n\nexport function serializeGetCredentialsResponse(response) {\n\tconst authAssertionResp = response.response as AuthenticatorAssertionResponse;\n\n\treturn {\n\t\tid: response.id,\n\t\trawId: encodeBuffer(response.rawId),\n\t\ttype: response.type,\n\t\tresponse: {\n\t\t\tclientDataJSON: encodeBuffer(authAssertionResp.clientDataJSON),\n\t\t\tauthenticatorData: encodeBuffer(authAssertionResp.authenticatorData),\n\t\t\tsignature: encodeBuffer(authAssertionResp.signature),\n\t\t\tuserHandle: encodeBuffer(authAssertionResp.userHandle),\n\t\t},\n\t};\n}\n\nexport function deserialize(method, obj) {\n\tconst object = JSON.parse(obj);\n\n\tif (method === 'credentials:get') {\n\t\treturn {\n\t\t\tpublicKey: {\n\t\t\t\t...object.publicKey,\n\t\t\t\t...{\n\t\t\t\t\tchallenge: decodeBuffer(object.publicKey.challenge),\n\t\t\t\t\tallowCredentials: (object.publicKey.allowCredentials || []).map(decodeObjectId),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\treturn object;\n}\n\nexport function deserializeGetCredentialsResponse(response) {\n\tconst authAssertionResp = response.response;\n\n\treturn {\n\t\t...response,\n\t\trawId: decodeBuffer(response.rawId),\n\t\ttype: response.type,\n\t\tresponse: {\n\t\t\tclientDataJSON: decodeBuffer(authAssertionResp.clientDataJSON),\n\t\t\tauthenticatorData: decodeBuffer(authAssertionResp.authenticatorData),\n\t\t\tsignature: decodeBuffer(authAssertionResp.signature),\n\t\t\tuserHandle: decodeBuffer(authAssertionResp.userHandle),\n\t\t},\n\t};\n}\n","import * as Emitter from 'wormhole.js/src/emitter';\nimport config from './config';\nimport Form from './form';\nimport lib from './lib';\nimport Gate from './gate';\nimport {serialize, serializeGetCredentialsResponse} from './webauthn-utils';\nimport {ICors, IForm, InvokeMethods, InvokeParams} from '../types';\n\n/* when not allowed domain, abort */\nif (!config.allowOpenDomain) {\n\tthrow Error('Not allowed domain');\n}\n\nconst d = typeof window.define !== 'undefined' ? window.define : false;\nlet authGate;\nlet cors: ICors;\nlet windowCors: ICors;\nlet form: IForm;\n\nfunction AuthGate() {\n\tthis.version = config.version;\n}\n\nlib.extend(\n\tAuthGate.prototype,\n\tEmitter.fn,\n\t{\n\t\tthen(callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback(window.__AG);\n\t\t\t}\n\t\t},\n\t},\n);\n\nauthGate = new AuthGate();\n\nfunction invoke(method: InvokeMethods, params: InvokeParams) {\n\tconst {func, payload} = params;\n\n\tconst data = serialize(method + ':' + func, payload);\n\n\treturn new Promise((resolve, reject) => {\n\t\tthis.call(method, {func, payload: data});\n\n\t\tauthGate.one(`${method}:${func}`, (response) => {\n\t\t\tresolve(response);\n\t\t});\n\n\t\tauthGate.one(`${method}:${func}:error`, (error) => {\n\t\t\treject(new Error(error));\n\t\t});\n\t});\n}\n\nif (!config.parent) {\n\tlib.extend(\n\t\tAuthGate.prototype,\n\t\tnew Gate(authGate)(window.parent),\n\t\t{\n\t\t\tinvoke: invoke.bind(authGate),\n\t\t},\n\t);\n} else {\n\tform = new Form();\n\tcors = new Gate(form)();\n\twindowCors = new Gate(form)(window);\n\tlib.extend(\n\t\tAuthGate.prototype,\n\t\t{\n\t\t\tinvoke: invoke.bind(windowCors),\n\t\t\t_config: config,\n\t\t\tshow: form.show.bind(form),\n\t\t\thide: form.hide.bind(form),\n\t\t\tinsert() {\n\t\t\t\tform.insert.apply(form, arguments);\n\t\t\t\tcors.el = form.__iframe;\n\t\t\t},\n\t\t\tunMount: form.unMount.bind(form),\n\t\t\tisVisible() {\n\t\t\t\treturn form.__isVisible;\n\t\t\t},\n\t\t\tisInserted() {\n\t\t\t\treturn form.__isInserted;\n\t\t\t},\n\t\t\tsetSettings() {\n\t\t\t\tconfig.setSettings.apply(config, arguments);\n\t\t\t},\n\t\t\tgetSettings() {\n\t\t\t\treturn config.getSettings.apply(config, arguments);\n\t\t\t},\n\t\t\tfocus(field, callback) {\n\t\t\t\tif (typeof field === 'string') {\n\t\t\t\t\tconfig.setSettings('focus', field);\n\t\t\t\t} else if (typeof field === 'function') {\n\t\t\t\t\tcallback = field;\n\t\t\t\t\tfield = config.getSettings('focus');\n\t\t\t\t}\n\t\t\t\tcallback = typeof callback === 'function' ? callback : lib.noop;\n\n\t\t\t\tcors.el = form.__iframe;\n\t\t\t\tcors.call('focus', field, function(err, data) {\n\t\t\t\t\tif (!form.__isVisible) {\n\t\t\t\t\t\terr = 'ERR_NOTVISIBLE';\n\t\t\t\t\t}\n\t\t\t\t\tcallback(err);\n\t\t\t\t});\n\t\t\t},\n\t\t\tERRCODES: {\n\t\t\t\tERR_NOTVISIBLE: 'Form is not visible',\n\t\t\t},\n\t\t},\n\t);\n\n\tform.on('show', function(settings) {\n\t\tif (form.isLoaded) {\n\t\t\tcors.el = form.__iframe;\n\t\t\tcors.call('show', settings, lib.noop);\n\n\t\t\t/* to remove, when release new interface of account */\n\t\t\tauthGate.focus();\n\t\t}\n\t});\n\n\tform.on('hide', function() {\n\t\tcors.el = form.__iframe;\n\t\tcors.call('hide', lib.noop);\n\t});\n\n\tform.on('max-height', function(height) {\n\t\tcors.el = form.__iframe;\n\t\tcors.call('setMaxHeight', {height}, lib.noop);\n\t});\n\n\tform.on('reset:email', function(email) {\n\t\tcors.el = form.__iframe;\n\t\tcors.call('reset:email', email, lib.noop);\n\t});\n\n\tform.on('credentials:get', function(credential) {\n\t\tconst resp = lib.extend({}, credential);\n\t\tif (form.isLoaded) {\n\t\t\tconst serializedResp = serializeGetCredentialsResponse(resp);\n\t\t\tcors.call('credentials:get', serializedResp, lib.noop);\n\t\t} else {\n\t\t\tauthGate.emit('credentials:get', resp);\n\t\t}\n\t});\n\n\tform.on('credentials:get:error', function(error) {\n\t\tif (form.isLoaded) {\n\t\t\tcors.call('credentials:get:error', error.message, lib.noop);\n\t\t} else {\n\t\t\tauthGate.emit('credentials:get:error', error.message);\n\t\t}\n\t});\n\n\tform.on('credentials:verifying', function(resp) {\n\t\tif (form.isLoaded) {\n\t\t\tcors.call('credentials:verifying', resp, lib.noop);\n\t\t} else {\n\t\t\tauthGate.emit('credentials:isUserVerifyingPlatformAuthenticatorAvailable', resp);\n\t\t}\n\t});\n\n\tform.on('credentials:verifying:error', function(error) {\n\t\tif (form.isLoaded) {\n\t\t\tcors.call('credentials:verifying:error', error.message, lib.noop);\n\t\t} else {\n\t\t\tauthGate.emit('credentials:isUserVerifyingPlatformAuthenticatorAvailable:error', error.message);\n\t\t}\n\t});\n\n\tlib.relayEvents(form, authGate, ['load', 'show', 'hide', 'click:signup', 'max-height']);\n}\n\nif (!('__PH' in window) && typeof d === 'function' && d.amd) {\n\ttry {\n\t\td(function() {\n\t\t\treturn authGate;\n\t\t});\n\t} catch (e) {\n\t\t(window as Window).__AG = authGate;\n\t}\n} else {\n\twindow.__AG = authGate;\n}\n","'use strict';\n\nimport * as Emitter from 'wormhole.js/src/emitter';\nimport config from './config';\nimport lib from './lib';\nimport * as popup from './popup/popup.xml';\nimport './popup/popup.scss';\nimport {DEFAULT_ACCOUNT_HOST, IS_ACCOUNT_HOST} from './constants';\nimport {Timers} from '../types';\n\nfunction getQueryVariable(variable) {\n\tconst query = window.location.search.substring(1);\n\tconst vars = query.split('&');\n\tfor (let i = 0; i < vars.length; i++) {\n\t\tconst pair = vars[i].split('=');\n\t\tif (decodeURIComponent(pair[0]) === variable) {\n\t\t\treturn decodeURIComponent(pair[1]);\n\t\t}\n\t}\n}\n\n/**\n *\n * @return {Form}\n * @constructor\n */\nfunction Form(): void {\n\tif (!(this instanceof Form)) {\n\t\treturn new Form();\n\t}\n\n\tthis.isLoaded = false;\n\n\tthis.__isVisible = false;\n\tthis.__isLoading = false;\n\tthis.__isInserted = false;\n}\n\nForm.prototype = {\n\t/**\n\t *\n\t * @param {Object} params\n\t * @expose\n\t */\n\tshow(params) {\n\t\tconst currentSuccessRedirect = config.getSettings('success_redirect');\n\t\tlet openType = 'login';\n\t\tif (typeof params === 'object' && typeof params.type === 'string') {\n\t\t\topenType = params.type === 'choice' ? 'choice' : 'login';\n\t\t}\n\t\tconst changedType = openType !== config.getSettings('type');\n\n\t\tif (this.__isVisible && !changedType) {\n\t\t\treturn;\n\t\t}\n\t\tconfig.setSettings({type: openType});\n\t\tif (params) {\n\t\t\tparams = config.setSettings(params);\n\t\t}\n\n\t\tif (config.settings.redirect_to_login || (config.isMobile && config.settings.mobile_redirect)) {\n\t\t\tthis.redirectToLogin();\n\n\t\t\treturn;\n\t\t}\n\n\t\t/* add timer for statistic */\n\t\tlib.phTimers('show', Date.now());\n\n\t\tthis.__isVisible = true;\n\t\tthis.__isLoadervisible = true;\n\n\t\tconst newSuccessRedirect = params && params.success_redirect;\n\t\t// если не передают новый success_redirect, будет считать что не изменился, так как это приведёт к багу\n\t\tconst isParamsEqual = newSuccessRedirect ? currentSuccessRedirect === newSuccessRedirect : true;\n\n\t\tif (!this.url || !isParamsEqual) {\n\t\t\tthis.url = null; // в методе init есть проверка на url, поэтому принудительно обнуляем\n\t\t\tthis.__init();\n\t\t\tthis.emit('show');\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.__reload(changedType);\n\t\t}\n\n\t\tlib.addClass(this.__overlay, 'ag-popup__overlay_show');\n\t\tlib.addClass(this.__frame, 'ag-popup__frame_show');\n\n\t\tthis.emit('show', params);\n\t},\n\n\tredirectToLogin() {\n\t\tconst url = this.__setUrl();\n\t\twindow.location.href = url;\n\t},\n\n\t/**\n\t * @expose\n\t */\n\thide() {\n\t\tthis.__isVisible = false;\n\n\t\tif (this.__isLoading) {\n\t\t\tthis.__breakLoad();\n\t\t}\n\n\t\tlib.removeClass(this.__overlay, 'ag-popup__overlay_show');\n\t\tlib.removeClass(this.__frame, 'ag-popup__frame_show');\n\t\tconfig.setSettings({email: null});\n\n\t\tthis.emit('hide');\n\t},\n\n\t/**\n\t * @param {Element}  wrapper\n\t * @param {Object}   params\n\t * @expose\n\t */\n\tinsert(wrapper, params) {\n\t\tif (!wrapper || this.__isInserted) {\n\t\t\treturn;\n\t\t}\n\n\t\tparams = lib.extend({\n\t\t\tmodal: true,\n\t\t}, params || {});\n\t\tconfig.setSettings(params);\n\n\t\tthis.__isInserted = true;\n\t\tthis.__isVisible = true;\n\t\tthis.__isLoadervisible = true;\n\t\t/* Remove show/hide methods because use only one form on page */\n\n\t\tif (params.modal) {\n\t\t\tthis.show = lib.noop;\n\t\t\tthis.hide = lib.noop;\n\t\t}\n\n\t\tlib.phTimers('show', Date.now());\n\t\tthis.__init(wrapper);\n\t},\n\n\tgetCredentials(options: CredentialRequestOptions) {\n\t\tnavigator.credentials.get(options)\n\t\t\t.then((credential) => {\n\t\t\t\tthis.emit('credentials:get', credential);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tthis.emit('credentials:get:error', error);\n\t\t\t});\n\t},\n\n\tisUserVerifyingPlatformAuthenticatorAvailable() {\n\t\t// @ts-ignore\n\t\tPublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()\n\t\t\t.then((resp) => {\n\t\t\t\tthis.emit('credentials:verifying', resp);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tthis.emit('credentials:verifying:error', error);\n\t\t\t});\n\t},\n\n\tunMount() {\n\t\tthis.url = null;\n\t\tthis.__isInserted = false;\n\t\tthis.__isVisible = false;\n\t\tthis.__isLoadervisible = false;\n\n\t\tif (this.element && this.__frame && lib.hasParent(this.__frame, this.element)) {\n\t\t\tthis.element.removeChild(this.__frame);\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @param {Element} wrapper\n\t * @private\n\t */\n\t__init(wrapper?) {\n\t\tif (this.url) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst height = window.innerHeight - 16;\n\t\t\tthis.emit('max-height', height);\n\t\t}\n\n\t\tthis.element = wrapper || lib.body;\n\n\t\tthis.url = this.__setUrl();\n\n\t\t/* Create frame */\n\t\tthis.__frame = this.__createElement(\n\t\t\tpopup({\n\t\t\t\tname: 'frame',\n\t\t\t\tsrc: this.url,\n\t\t\t\tonoverlay: !wrapper,\n\t\t\t\tisMobile: config.isMobile && !this.__isInserted,\n\t\t\t}),\n\t\t);\n\n\t\tthis.__layout = this.__frame.children[0];\n\t\tthis.__iframe = this.__layout.children[0];\n\t\tthis.__loader = this.__layout.children[1];\n\n\t\tthis.__showLoader();\n\n\t\t/*\n\t\t * Add loadListener\n\t\t * IMPORTANT: add loadListener before insert in document\n\t\t */\n\t\tthis.on('load', this.__loadHandler);\n\n\t\tthis.__isLoading = true;\n\t\tthis.element.appendChild(this.__frame);\n\n\t\tthis.__resize({\n\t\t\twidth: 420,\n\t\t\theight: config.getSettings('allow_external') ? 298 : 241,\n\t\t});\n\n\t\tlib.on(document, 'keyup', (event) => {\n\t\t\tif (event.keyCode === 27 && !config.getSettings('modal')) {\n\t\t\t\tlib.preventDefault(event);\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t});\n\n\t\tlib.on(window, 'resize', (event) => {\n\t\t\tconst height = window.innerHeight - 16;\n\t\t\tthis.emit('max-height', height);\n\t\t});\n\n\t\tif (!wrapper) {\n\t\t\tthis.__addOverlay();\n\t\t}\n\n\t},\n\n\t/**\n\t *\n\t * @private\n\t */\n\t__addOverlay() {\n\t\tthis.__overlay = this.__createElement(\n\t\t\tpopup({\n\t\t\t\tname: 'overlay',\n\t\t\t}),\n\t\t);\n\n\t\tlib.body.appendChild(this.__overlay);\n\n\t\tlib.on(this.__frame, 'click', this.__hide.bind(this));\n\t},\n\n\t/**\n\t *\n\t * @param {Event} event\n\t * @private\n\t */\n\t__hide(event) {\n\t\tconst target = event.target || event.srcElement;\n\n\t\tif (!lib.hasParent(target, this.__frame) && !config.getSettings('modal')) {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @param {Object} size\n\t * @private\n\t */\n\t__resize(size) {\n\t\tconst px = 'px';\n\n\t\t/**\n\t\t * @param {'height'|'width'} name\n\t\t * @param {number} size\n\t\t */\n\t\tconst resize = (name, size) => {\n\t\t\tconst marginDirection = name === 'width' ? 'marginLeft' : 'marginTop';\n\n\t\t\tthis.__layout.style[name] = size + px;\n\t\t\tif (name === 'height') {\n\t\t\t\tif (size < 510) {\n\t\t\t\t\tthis.__layout.style['max' + lib.capitalize(name)] = size + px;\n\t\t\t\t} else {\n\t\t\t\t\tthis.__layout.style['max' + lib.capitalize(name)] = '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.__isInserted) {\n\t\t\t\tthis.__layout.style[marginDirection] = -size[name] / 2 + px;\n\t\t\t\tthis.__frame.style['min' + lib.capitalize(name)] = (size[name] + 50) + px;\n\t\t\t}\n\t\t};\n\n\t\tfor (const i in size) {\n\t\t\tif (size.hasOwnProperty(i)) {\n\t\t\t\tresize(i, size[i]);\n\t\t\t}\n\t\t}\n\n\t\t// Для фикс бага FMAIL-8139 Нестабильно работает скролл аккаунтов в попапе авторизации по телефону\n\t\tconst height = window.innerHeight - 16;\n\t\tthis.emit('max-height', height);\n\t},\n\t/**\n\t *\n\t * @param {String} email\n\t * @private\n\t */\n\t__resetEmail(email) {\n\t\tif (email) {\n\t\t\t// показываем лоадер, пока не будет вызван __hideLoader\n\t\t\t// самим логином после выполнения всех экшенов\n\t\t\tthis.__showLoader();\n\t\t\tthis.emit('reset:email', email);\n\t\t}\n\t},\n\n\t/**\n\t * @private\n\t */\n\t__reload(force) {\n\t\tif (this.isLoaded && !force) {\n\t\t\tthis.__resetEmail(config.getSettings('email'));\n\t\t\treturn;\n\t\t}\n\t\tconst isLoaded = this.isLoaded;\n\t\tthis.isLoaded = false;\n\n\t\tthis.__resize({\n\t\t\twidth: 420,\n\t\t\theight: config.getSettings('allow_external') ? 298 : 241,\n\t\t});\n\t\tthis.__isLoading = true;\n\t\tthis.url = this.__setUrl();\n\t\tthis.__iframe.src = this.url;\n\n\t\tthis.__showLoader();\n\t},\n\n\t__getAccountHost() {\n\t\tconst queryHost = getQueryVariable('account_host');\n\t\tif (queryHost && IS_ACCOUNT_HOST.test(queryHost)) {\n\t\t\treturn queryHost;\n\t\t}\n\n\t\tconst settingsHost = config.getSettings('account_host');\n\t\tif (settingsHost && IS_ACCOUNT_HOST.test(settingsHost)) {\n\t\t\treturn settingsHost;\n\t\t}\n\n\t\tif (!!config.settings.devmail) {\n\t\t\treturn 'account.devmail.ru';\n\t\t}\n\n\t\treturn DEFAULT_ACCOUNT_HOST;\n\t},\n\n\t/**\n\t *\n\t * @private\n\t */\n\t__setUrl() {\n\t\tconst accountHost = this.__getAccountHost();\n\t\tlet url = `https://${accountHost}` + config.url[config.getSettings('type')] + '&v=' + config.version;\n\n\t\tif (!config.settings.hasOwnProperty('success_redirect')) {\n\t\t\tconfig.settings.success_redirect = window.location.href;\n\t\t}\n\n\t\tconst preview = parseInt(getQueryVariable('preview'), 10);\n\n\t\tif (!isNaN(preview)) {\n\t\t\tconfig.settings.preview = preview;\n\t\t}\n\n\t\tlet value;\n\n\t\tfor (const i in config.settings) {\n\t\t\tvalue = config.settings[i];\n\n\t\t\tif (value !== null) {\n\t\t\t\turl += '&' + encodeURIComponent(i) + '=' + encodeURIComponent(value);\n\t\t\t}\n\t\t}\n\n\t\tif (config.settings.redirect_to_login || (config.isMobile && config.settings.mobile_redirect)) {\n\t\t\turl = url.replace(/\\?mode=simple&/, '?');\n\t\t} else {\n\t\t\turl += `&parent_url=${encodeURIComponent(location.href)}`;\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t/**\n\t *\n\t * @private\n\t */\n\t__breakLoad() {\n\t\tthis.__isLoading = false;\n\t\tthis.__iframe.src = '';\n\t},\n\n\t/**\n\t *\n\t * @param {Object} data\n\t * @private\n\t */\n\t__loadHandler(data) {\n\t\tthis.__isLoading = false;\n\t\tthis.isLoaded = true;\n\n\t\tif (!this.__isVisible) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.__hideLoader();\n\t\tthis.__resize(data);\n\n\t\tconst height = window.innerHeight - 16;\n\t\tthis.emit('max-height', height);\n\n\t\t/* statistic of time load form */\n\t\tthis.__showCounter();\n\t},\n\n\t__showCounter() {\n\t\tconst now = Date.now();\n\t\tconst timers = lib.phTimers() as Timers;\n\t\tlet project = lib.phProject();\n\n\t\tif (project.length) {\n\t\t\tproject = '_' + project;\n\t\t}\n\t\t/* timer by init show */\n\t\tif (timers.show) {\n\t\t\tlib.phRadar('show', now - timers.show, 'newform' + project);\n\t\t}\n\t\t/* timer by click in button */\n\t\tif (timers.render) {\n\t\t\tlib.phRadar('render', now - timers.render, 'newform' + project);\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @param {String} content\n\t * @private\n\t */\n\t__createElement(content) {\n\t\tconst fragment = document.createDocumentFragment().appendChild(document.createElement('div')) as HTMLElement;\n\t\tfragment.innerHTML = content;\n\n\t\treturn fragment.children[0];\n\t},\n\n\t/**\n\t *\n\t * @private\n\t */\n\t__showLoader() {\n\t\tif (this.__isLoadervisible) {\n\t\t\tlib.addClass(this.__loader, 'ag-popup__frame__layout__loader-wrapper_show');\n\t\t\tthis.__isLoadervisible = true;\n\t\t}\n\t},\n\n\t/**\n\t *\n\t * @private\n\t */\n\t__hideLoader() {\n\t\tif (this.__isLoadervisible) {\n\t\t\tlib.removeClass(this.__loader, 'ag-popup__frame__layout__loader-wrapper_show');\n\t\t\tthis.__isLoadervisible = false;\n\t\t}\n\t},\n};\n\nEmitter.apply(Form.prototype);\n\nexport default Form;\n","\n/** \n * =============================================================\n * /home/d.tulforov/deploy_git_temp_wQ10cMru/src/popup/popup template\n * =============================================================\n */\n\nmodule.exports = function (__fest_context){\"use strict\";var __fest_self=this,__fest_buf=\"\",__fest_chunks=[],__fest_chunk,__fest_attrs=[],__fest_select,__fest_if,__fest_iterator,__fest_to,__fest_fn,__fest_html=\"\",__fest_blocks={},__fest_params,__fest_element,__fest_debug_file=\"\",__fest_debug_line=\"\",__fest_debug_block=\"\",__fest_element_stack = [],__fest_short_tags = {\"area\": true, \"base\": true, \"br\": true, \"col\": true, \"command\": true, \"embed\": true, \"hr\": true, \"img\": true, \"input\": true, \"keygen\": true, \"link\": true, \"meta\": true, \"param\": true, \"source\": true, \"wbr\": true},__fest_jschars = /[\\\\'\"\\/\\n\\r\\t\\b\\f<>]/g,__fest_jschars_test = /[\\\\'\"\\/\\n\\r\\t\\b\\f<>]/,__fest_htmlchars = /[&<>\"]/g,__fest_htmlchars_test = /[&<>\"]/,__fest_jshash = {\"\\\"\": \"\\\\\\\"\", \"\\\\\": \"\\\\\\\\\", \"/\": \"\\\\/\", \"\\n\": \"\\\\n\", \"\\r\": \"\\\\r\", \"\\t\": \"\\\\t\", \"\\b\": \"\\\\b\", \"\\f\": \"\\\\f\", \"'\": \"\\\\'\", \"<\": \"\\\\u003C\", \">\": \"\\\\u003E\"},__fest_htmlhash = {\"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", \"\\\"\": \"&quot;\"},__fest_escapeJS = function __fest_escapeJS(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tif (__fest_jschars_test.test(value)) {\n\t\t\t\treturn value.replace(__fest_jschars, __fest_replaceJS);\n\t\t\t}\n\t\t}\n\n\t\treturn value == null ? '' : value;\n\t},__fest_replaceJS = function __fest_replaceJS(chr) {\n\t\treturn __fest_jshash[chr];\n\t},__fest_escapeHTML = function __fest_escapeHTML(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tif (__fest_htmlchars_test.test(value)) {\n\t\t\t\treturn value.replace(__fest_htmlchars, __fest_replaceHTML);\n\t\t\t}\n\t\t}\n\n\t\treturn value == null ? '' : value;\n\t},__fest_replaceHTML = function __fest_replaceHTML(chr) {\n\t\treturn __fest_htmlhash[chr];\n\t},__fest_extend = function __fest_extend(dest, src) {\n\t\tfor (var key in src) {\n\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\tdest[key] = src[key];\n\t\t\t}\n\t\t}\n\t},__fest_param = function __fest_param(fn) {\n\t\tfn.param = true;\n\t\treturn fn;\n\t},i18n=__fest_self && typeof __fest_self.i18n === \"function\" ? __fest_self.i18n : function (str) {return str;},___fest_log_error;if(typeof __fest_error === \"undefined\"){___fest_log_error = (typeof console !== \"undefined\" && console.error) ? function(){return Function.prototype.apply.call(console.error, console, arguments)} : function(){};}else{___fest_log_error=__fest_error};function __fest_log_error(msg){___fest_log_error(msg+\"\\nin block \\\"\"+__fest_debug_block+\"\\\" at line: \"+__fest_debug_line+\"\\nfile: \"+__fest_debug_file)}function __fest_call(fn, params,cp){if(cp)for(var i in params)if(typeof params[i]==\"function\"&&params[i].param)params[i]=params[i]();return fn.call(__fest_self,params)}var data=__fest_context;try{__fest_select=\"popup-\"+( data.name )}catch(e){__fest_select=\"\";__fest_log_error(e.message)}__fest_params={};try{__fest_params=data}catch(e){__fest_log_error(e.message)}__fest_chunks.push(__fest_buf,{name:__fest_select,params:__fest_params,cp:false});__fest_buf=\"\";__fest_blocks[\"loader-svg\"]=function(params){var __fest_buf=\"\";__fest_buf+=(\"<svg xmlns=\\\"http:\\/\\/www.w3.org\\/2000\\/svg\\\" xmlns:xlink=\\\"http:\\/\\/www.w3.org\\/1999\\/xlink\\\" viewBox=\\\"0 0 64 64\\\"><defs><path id=\\\"a\\\" d=\\\"M0 0h32v32H0z\\\"></path><mask id=\\\"progress\\\"><path fill=\\\"#fff\\\" d=\\\"M0 0h64v64H0z\\\"></path><use fill=\\\"#020202\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-146 32 32)\\\"></use><use fill=\\\"#040404\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-144 32 32)\\\"></use><use fill=\\\"#060606\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-142 32 32)\\\"></use><use fill=\\\"#080808\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-140 32 32)\\\"></use><use fill=\\\"#0A0A0A\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-138 32 32)\\\"></use><use fill=\\\"#0C0C0C\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-136 32 32)\\\"></use><use fill=\\\"#0E0E0E\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-134 32 32)\\\"></use><use fill=\\\"#101010\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-132 32 32)\\\"></use><use fill=\\\"#131313\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-130 32 32)\\\"></use><use fill=\\\"#151515\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-128 32 32)\\\"></use><use fill=\\\"#171717\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-126 32 32)\\\"></use><use fill=\\\"#191919\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-124 32 32)\\\"></use><use fill=\\\"#1B1B1B\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-122 32 32)\\\"></use><use fill=\\\"#1D1D1D\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-120 32 32)\\\"></use><use fill=\\\"#1F1F1F\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-118 32 32)\\\"></use><use fill=\\\"#212121\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-116 32 32)\\\"></use><use fill=\\\"#242424\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-114 32 32)\\\"></use><use fill=\\\"#262626\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-112 32 32)\\\"></use><use fill=\\\"#282828\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-110 32 32)\\\"></use><use fill=\\\"#2A2A2A\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-108 32 32)\\\"></use><use fill=\\\"#2C2C2C\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-106 32 32)\\\"></use><use fill=\\\"#2E2E2E\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-104 32 32)\\\"></use><use fill=\\\"#303030\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-102 32 32)\\\"></use><use fill=\\\"#323232\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-100 32 32)\\\"></use><use fill=\\\"#353535\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-98 32 32)\\\"></use><use fill=\\\"#373737\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-96 32 32)\\\"></use><use fill=\\\"#393939\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-94 32 32)\\\"></use><use fill=\\\"#3B3B3B\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-92 32 32)\\\"></use><use fill=\\\"#3D3D3D\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-90 32 32)\\\"></use><use fill=\\\"#3F3F3F\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-88 32 32)\\\"></use><use fill=\\\"#414141\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-86 32 32)\\\"></use><use fill=\\\"#434343\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-84 32 32)\\\"></use><use fill=\\\"#464646\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-82 32 32)\\\"></use><use fill=\\\"#484848\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-80 32 32)\\\"></use><use fill=\\\"#4A4A4A\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-78 32 32)\\\"></use><use fill=\\\"#4C4C4C\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-76 32 32)\\\"></use><use fill=\\\"#4E4E4E\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-74 32 32)\\\"></use><use fill=\\\"#505050\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-72 32 32)\\\"></use><use fill=\\\"#525252\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-70 32 32)\\\"></use><use fill=\\\"#545454\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-68 32 32)\\\"></use><use fill=\\\"#575757\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-66 32 32)\\\"></use><use fill=\\\"#595959\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-64 32 32)\\\"></use><use fill=\\\"#5B5B5B\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-62 32 32)\\\"></use><use fill=\\\"#5D5D5D\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-60 32 32)\\\"></use><use fill=\\\"#5F5F5F\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-58 32 32)\\\"></use><use fill=\\\"#616161\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-56 32 32)\\\"></use><use fill=\\\"#636363\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-54 32 32)\\\"></use><use fill=\\\"#656565\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-52 32 32)\\\"></use><use fill=\\\"#686868\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-50 32 32)\\\"></use><use fill=\\\"#6A6A6A\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-48 32 32)\\\"></use><use fill=\\\"#6C6C6C\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-46 32 32)\\\"></use><use fill=\\\"#6E6E6E\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-44 32 32)\\\"></use><use fill=\\\"#707070\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-42 32 32)\\\"></use><use fill=\\\"#727272\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-40 32 32)\\\"></use><use fill=\\\"#747474\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-38 32 32)\\\"></use><use fill=\\\"#767676\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-36 32 32)\\\"></use><use fill=\\\"#797979\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-34 32 32)\\\"></use><use fill=\\\"#7B7B7B\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-32 32 32)\\\"></use><use fill=\\\"#7D7D7D\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-30 32 32)\\\"></use><use fill=\\\"#7F7F7F\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-28 32 32)\\\"></use><use fill=\\\"#818181\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-26 32 32)\\\"></use><use fill=\\\"#838383\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-24 32 32)\\\"></use><use fill=\\\"#858585\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-22 32 32)\\\"></use><use fill=\\\"#878787\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-20 32 32)\\\"></use><use fill=\\\"#8A8A8A\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-18 32 32)\\\"></use><use fill=\\\"#8C8C8C\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-16 32 32)\\\"></use><use fill=\\\"#8E8E8E\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-14 32 32)\\\"></use><use fill=\\\"#909090\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-12 32 32)\\\"></use><use fill=\\\"#929292\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-10 32 32)\\\"></use><use fill=\\\"#949494\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-8 32 32)\\\"></use><use fill=\\\"#969696\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-6 32 32)\\\"></use><use fill=\\\"#989898\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-4 32 32)\\\"></use><use fill=\\\"#9B9B9B\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(-2 32 32)\\\"></use><use fill=\\\"#9D9D9D\\\" xlink:href=\\\"#a\\\"></use><use fill=\\\"#9F9F9F\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(2 32 32)\\\"></use><use fill=\\\"#A1A1A1\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(4 32 32)\\\"></use><use fill=\\\"#A3A3A3\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(6 32 32)\\\"></use><use fill=\\\"#A5A5A5\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(8 32 32)\\\"></use><use fill=\\\"#A7A7A7\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(10 32 32)\\\"></use><use fill=\\\"#A9A9A9\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(12 32 32)\\\"></use><use fill=\\\"#ACACAC\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(14 32 32)\\\"></use><use fill=\\\"#AEAEAE\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(16 32 32)\\\"></use><use fill=\\\"#B0B0B0\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(18 32 32)\\\"></use><use fill=\\\"#B2B2B2\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(20 32 32)\\\"></use><use fill=\\\"#B4B4B4\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(22 32 32)\\\"></use><use fill=\\\"#B6B6B6\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(24 32 32)\\\"></use><use fill=\\\"#B8B8B8\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(26 32 32)\\\"></use><use fill=\\\"#BABABA\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(28 32 32)\\\"></use><use fill=\\\"#BDBDBD\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(30 32 32)\\\"></use><use fill=\\\"#BFBFBF\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(32 32 32)\\\"></use><use fill=\\\"#C1C1C1\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(34 32 32)\\\"></use><use fill=\\\"#C3C3C3\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(36 32 32)\\\"></use><use fill=\\\"#C5C5C5\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(38 32 32)\\\"></use><use fill=\\\"#C7C7C7\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(40 32 32)\\\"></use><use fill=\\\"#C9C9C9\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(42 32 32)\\\"></use><use fill=\\\"#CBCBCB\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(44 32 32)\\\"></use><use fill=\\\"#CECECE\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(46 32 32)\\\"></use><use fill=\\\"#D0D0D0\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(48 32 32)\\\"></use><use fill=\\\"#D2D2D2\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(50 32 32)\\\"></use><use fill=\\\"#D4D4D4\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(52 32 32)\\\"></use><use fill=\\\"#D6D6D6\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(54 32 32)\\\"></use><use fill=\\\"#D8D8D8\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(56 32 32)\\\"></use><use fill=\\\"#DADADA\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(58 32 32)\\\"></use><use fill=\\\"#DCDCDC\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(60 32 32)\\\"></use><use fill=\\\"#DFDFDF\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(62 32 32)\\\"></use><use fill=\\\"#E1E1E1\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(64 32 32)\\\"></use><use fill=\\\"#E3E3E3\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(66 32 32)\\\"></use><use fill=\\\"#E5E5E5\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(68 32 32)\\\"></use><use fill=\\\"#E7E7E7\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(70 32 32)\\\"></use><use fill=\\\"#E9E9E9\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(72 32 32)\\\"></use><use fill=\\\"#EBEBEB\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(74 32 32)\\\"></use><use fill=\\\"#EDEDED\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(76 32 32)\\\"></use><use fill=\\\"#F0F0F0\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(78 32 32)\\\"></use><use fill=\\\"#F2F2F2\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(80 32 32)\\\"></use><use fill=\\\"#F4F4F4\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(82 32 32)\\\"></use><use fill=\\\"#F6F6F6\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(84 32 32)\\\"></use><use fill=\\\"#F8F8F8\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(86 32 32)\\\"></use><use fill=\\\"#FAFAFA\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(88 32 32)\\\"></use><use fill=\\\"#FCFCFC\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(90 32 32)\\\"></use><use fill=\\\"#FEFEFE\\\" xlink:href=\\\"#a\\\" transform=\\\"rotate(92 32 32)\\\"></use></mask></defs><path d=\\\"M54.6 47.6c-1.98-1.98-5.09-1.98-7.07 0-8.56 8.56-22.6 8.56-31.1 0-8.56-8.56-8.56-22.6 0-31.1 4.54-5.58-3.25-10.7-7.07-7.07-12.4 12.4-12.4 32.8 0 45.3 12.4 12.4 32.8 12.4 45.3 0 1.98-1.98 1.98-5.09 0-7.07zM32 54c-12.1 0-22-9.9-22-22s9.9-22 22-22c2.8 0 5-2.2 5-5s-2.2-5-5-5C14.4 0 0 14.4 0 32s14.4 32 32 32c7.16-.736 5.26-9.84 0-10z\\\" mask=\\\"url(#progress)\\\"></path></svg>\");return __fest_buf;};__fest_blocks[\"popup-overlay\"]=function(params){var __fest_buf=\"\";__fest_buf+=(\"<div class=\\\"ag_js-popup-overlay ag-popup__overlay ag-popup__overlay_show\\\"></div>\");return __fest_buf;};__fest_blocks[\"popup-frame\"]=function(params){var __fest_buf=\"\";try{__fest_attrs[0]=__fest_escapeHTML( params.onoverlay ? '_onoverlay' : '_inpage' )}catch(e){__fest_attrs[0]=\"\"; __fest_log_error(e.message);}__fest_buf+=(\"<div class=\\\"ag_js-popup-frame ag-popup__frame ag-popup__frame_show ag-popup__frame\" + __fest_attrs[0] + \"\\\">\");try{__fest_attrs[0]=__fest_escapeHTML(params.isMobile?'mobile':'desktop')}catch(e){__fest_attrs[0]=\"\"; __fest_log_error(e.message);}__fest_buf+=(\"<div class=\\\"ag-popup__frame__layout ag-popup__frame__layout-\" + __fest_attrs[0] + \"\\\">\");try{__fest_attrs[0]=__fest_escapeHTML( params.src )}catch(e){__fest_attrs[0]=\"\"; __fest_log_error(e.message);}try{__fest_attrs[1]=__fest_escapeHTML(params.isMobile?'yes':'no')}catch(e){__fest_attrs[1]=\"\"; __fest_log_error(e.message);}__fest_buf+=(\"<iframe src=\\\"\" + __fest_attrs[0] + \"\\\" class=\\\"ag-popup__frame__layout__iframe\\\" scrolling=\\\"\" + __fest_attrs[1] + \"\\\" frameBorder=\\\"0\\\"></iframe><div class=\\\"ag-popup__frame__layout__loader-wrapper\\\"><div class=\\\"ag-popup__frame__layout__loader\\\">\");__fest_select=\"loader-svg\";__fest_params={};try{__fest_params=data}catch(e){__fest_log_error(e.message)}__fest_fn=__fest_blocks[__fest_select];if (__fest_fn)__fest_buf+=__fest_call(__fest_fn,__fest_params,false);__fest_buf+=(\"</div></div></div></div>\");return __fest_buf;};__fest_to=__fest_chunks.length;if (__fest_to) {__fest_iterator = 0;for (;__fest_iterator<__fest_to;__fest_iterator++) {__fest_chunk=__fest_chunks[__fest_iterator];if (typeof __fest_chunk===\"string\") {__fest_html+=__fest_chunk;} else {__fest_fn=__fest_blocks[__fest_chunk.name];if (__fest_fn) __fest_html+=__fest_call(__fest_fn,__fest_chunk.params,__fest_chunk.cp);}}return __fest_html+__fest_buf;} else {return __fest_buf;}}","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../node_modules/postcss-loader/src/index.js!../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./popup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ag-popup__overlay{top:0;left:0;right:0;bottom:0;opacity:.48;z-index:10000;position:fixed;background:#000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:none}.ag-popup__overlay_show{display:block}.ag-popup__frame{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:none}.ag-popup__frame__layout{background:#fff;overflow:hidden;width:420px;outline:none;-webkit-transition:height .111s ease-in-out;transition:height .111s ease-in-out}.ag-popup__frame__layout__iframe{position:relative;width:100%;height:100%;margin:0;border:0}.ag-popup__frame__layout__loader-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;display:none}.ag-popup__frame__layout__loader-wrapper_show{display:block}.ag-popup__frame__layout__loader{position:absolute;display:block;width:32px;height:32px;top:50%;left:50%;margin:-16px 0 0 -16px;-webkit-animation:spin 1s cubic-bezier(0.49, 0.28, 0.49, 0.67) infinite;animation:spin 1s cubic-bezier(0.49, 0.28, 0.49, 0.67) infinite;fill:#005ff9}.ag-popup__frame__layout__loader>svg{fill:#005ff9 !important}.ag-popup__frame__layout-mobile{width:calc(100% - 8px) !important;height:calc(100% - 16px) !important;max-height:510px;max-width:420px;min-width:320px !important}.ag-popup__frame__layout-desktop{max-height:calc(100% - 16px) !important}.ag-popup__frame_onoverlay{position:fixed;left:0;top:0;width:100%;height:100%;z-index:10001;text-align:center}.ag-popup__frame_onoverlay .ag-popup__frame__layout{position:relative;box-shadow:0 16px 48px 0 rgba(0,0,0,.48);overflow:hidden;border-radius:12px}.ag-popup__frame_inpage{position:relative;margin:0 auto}.ag-popup__frame_show{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg) translatez(0);transform:rotate(360deg) translatez(0)}}@keyframes spin{to{-webkit-transform:rotate(360deg) translatez(0);transform:rotate(360deg) translatez(0)}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","///<reference path=\"./wormhole.d.ts\" />\n\nimport * as Cors from 'wormhole.js/src/cors';\nimport config from './config';\nimport lib from './lib';\nimport {IS_MAIL_RU_RE} from './constants';\nimport {deserialize, deserializeGetCredentialsResponse} from './webauthn-utils';\nimport {AuthGateIFrame} from '../types/iframe';\nimport {IForm} from '../types';\n\nexport default function initGate(obj: AuthGateIFrame | IForm): void {\n\n\tCors.allowAccess(IS_MAIL_RU_RE);\n\tCors.setExpando('AG');\n\n\tif (!config.parent) {\n\t\tconst AG = obj as AuthGateIFrame;\n\n\t\tlib.extend(Cors, {\n\t\t\tfocus(field) {\n\t\t\t\tAG.emit('focus', field);\n\t\t\t},\n\t\t\tupdate(settings) {\n\t\t\t\tAG.emit('update', settings);\n\t\t\t},\n\t\t\tshow(settings) {\n\t\t\t\tAG.emit('show', settings);\n\t\t\t},\n\t\t\thide() {\n\t\t\t\tAG.emit('hide');\n\t\t\t},\n\t\t\tsetMaxHeight(params) {\n\t\t\t\tAG.maxHeightData = params;\n\t\t\t\tAG.emit('max-height', params);\n\t\t\t},\n\t\t\t'reset:email'(email) {\n\t\t\t\tAG.emit('reset:email', email);\n\t\t\t},\n\t\t\t'credentials:get'(resp) {\n\t\t\t\tconst decodedResp = deserializeGetCredentialsResponse(resp);\n\t\t\t\tAG.emit('credentials:get', decodedResp);\n\t\t\t},\n\t\t\t'credentials:get:error'(error) {\n\t\t\t\tAG.emit('credentials:get:error', error);\n\t\t\t},\n\t\t\t'credentials:verifying'(resp) {\n\t\t\t\tAG.emit('credentials:isUserVerifyingPlatformAuthenticatorAvailable', resp);\n\t\t\t},\n\t\t\t'credentials:verifying:error'(error) {\n\t\t\t\tAG.emit('credentials:isUserVerifyingPlatformAuthenticatorAvailable:error', error);\n\t\t\t},\n\t\t});\n\t} else {\n\t\tconst form = obj as IForm;\n\n\t\tlib.extend(Cors, {\n\t\t\tload(data) {\n\t\t\t\tconst dataValid = lib.validate(data, {\n\t\t\t\t\tstatus: 'string',\n\t\t\t\t\twidth: {\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\trequire: true,\n\t\t\t\t\t},\n\t\t\t\t\theight: {\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\trequire: true,\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tif (dataValid) {\n\t\t\t\t\tform.emit('load', dataValid);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tauth() {\n\t\t\t\tconst redirectUrl = config.getSettings('success_redirect');\n\n\t\t\t\tif (!redirectUrl || redirectUrl === window.location.href) {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t} else {\n\t\t\t\t\twindow.location.href = redirectUrl;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'form:resize'(data) {\n\t\t\t\tconst dataValid = lib.validate(data, {\n\t\t\t\t\twidth: 'number',\n\t\t\t\t\theight: 'number',\n\t\t\t\t});\n\n\t\t\t\tif (dataValid) {\n\t\t\t\t\tform.__resize(dataValid);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'form:hide'() {\n\t\t\t\tform.hide();\n\t\t\t},\n\n\t\t\t'form:hide-loader'() {\n\t\t\t\tform.__hideLoader();\n\t\t\t},\n\n\t\t\t'click:signup'(data) {\n\t\t\t\tform.emit('click:signup', data);\n\t\t\t},\n\n\t\t\t'click:extauth'(url) {\n\t\t\t\tif (IS_MAIL_RU_RE.test(url)) {\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcredentials({func, payload}) {\n\t\t\t\tlet options;\n\t\t\t\tswitch (func) {\n\t\t\t\t\tcase 'get':\n\t\t\t\t\t\toptions = deserialize('credentials:get', payload);\n\t\t\t\t\t\tform.getCredentials(options);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'isUserVerifyingPlatformAuthenticatorAvailable':\n\t\t\t\t\t\tform.isUserVerifyingPlatformAuthenticatorAvailable();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/* AuthGate is open */\n\treturn Cors;\n}\n","define([\"./emitter\", \"./get-own\"], function (Emitter, getOwn) {\n\tvar _corsId = 1,\n\t\t_corsExpando = '__cors__',\n\t\t_corsCallback = {},\n\t\t_parseJSON = JSON.parse,\n\t\t_stringifyJSON = JSON.stringify,\n\t\t_allowAccess = void 0\n\t;\n\n\n\t/**\n\t * @class  cors\n\t * @desc   Обертка над postMessage\n\t * @param  {Window}  el\n\t */\n\tfunction cors(el) {\n\t\tif (!(this instanceof cors)) {\n\t\t\treturn new cors(el);\n\t\t}\n\n\t\tthis.el = el;\n\t}\n\n\n\tcors.fn = cors.prototype = /** @lends cors.prototype */ {\n\t\t/**\n\t\t * Вызывать удаленную команду\n\t\t * @param {String}   cmd    команда\n\t\t * @param {*}        [data] данные\n\t\t * @param {Function} [callback] функция обратного вызова, получает: `error` и `result`\n\t\t */\n\t\tcall: function (cmd, data, callback) {\n\t\t\tif (typeof data === 'function') {\n\t\t\t\tcallback = data;\n\t\t\t\tdata = void 0;\n\t\t\t}\n\n\t\t\tvar evt = {\n\t\t\t\tcmd: cmd,\n\t\t\t\tdata: data\n\t\t\t};\n\n\t\t\tevt[_corsExpando] = ++_corsId;\n\t\t\t_corsCallback[_corsId] = callback;\n\n\t\t\tthis.send(evt);\n\t\t},\n\n\n\t\t/**\n\t\t * Отправить даныне\n\t\t * @param {*} data\n\t\t */\n\t\tsend: function (data) {\n\t\t\tvar window = this.el;\n\n\t\t\ttry {\n\t\t\t\t// Если это iframe\n\t\t\t\twindow = window.contentWindow || /* istanbul ignore next */ window;\n\t\t\t} catch (err) {\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\twindow.postMessage(_corsExpando + _stringifyJSON(data), '*');\n\t\t\t}\n\t\t\tcatch (err) {}\n\t\t}\n\t};\n\n\t/**\n\t * Разрешение для конкретного `origin`\n\t * @param {*} origin\n\t */\n\tcors.allowAccess = function (origin) {\n\t\tif (typeof origin === 'string' || origin instanceof RegExp) {\n\t\t\t_allowAccess = origin;\n\t\t}\n\t};\n\n\t/**\n\t * Установка кастомного префикса `expando`\n\t * @param {String} expando\n\t */\n\tcors.setExpando = function (expando) {\n\t\tif (typeof expando === 'string') {\n\t\t\t_corsExpando = expando;\n\t\t}\n\t};\n\n\n\n\t\n\n\t/**\n\t * Проверка на соответствие `targetOrigin`\n\t * @param {*} targetOrigin\n\t * @private\n\t */\n\tfunction _checkAccess(targetOrigin) {\n\t\tif (_allowAccess == void 0) {\n\t\t\treturn true;\n\t\t} else if (_allowAccess instanceof RegExp) {\n\t\t\treturn _allowAccess.test(targetOrigin);\n\t\t} else if (typeof _allowAccess === 'string') {\n\t\t\treturn targetOrigin === _allowAccess;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Получение `postMessage`\n\t * @param {Event} evt\n\t * @private\n\t */\n\tfunction _onmessage(evt) {\n\t\tvar origin,\n\t\t\tid,\n\t\t\tresp = {},\n\t\t\tdata = evt.data,\n\t\t\tsource = evt.source,\n\t\t\tfunc;\n\n\t\tevt = evt || /* istanbul ignore next */ window.event;\n\t\torigin = evt.origin || evt.originalEvent.origin;\n\n\t\t/* istanbul ignore else */\n\t\tif (typeof data === 'string' && data.indexOf(_corsExpando) === 0 && _checkAccess(origin)) {\n\t\t\t// Наше сообщение\n\t\t\ttry {\n\t\t\t\t// Парсим данные\n\t\t\t\tdata = _parseJSON(evt.data.substr(_corsExpando.length));\n\t\t\t\tid = data[_corsExpando];\n\n\t\t\t\tif (id) {\n\t\t\t\t\t// Это call или ответ на него\n\t\t\t\t\tif (data.response) {\n\t\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\t\tif (_corsCallback[id]) {\n\t\t\t\t\t\t\t_corsCallback[id](data.error, data.result);\n\t\t\t\t\t\t\tdelete _corsCallback[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Фомируем ответ\n\t\t\t\t\t\tresp.response =\n\t\t\t\t\t\tresp[_corsExpando] = id;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tfunc = getOwn(cors, data.cmd);\n\n\t\t\t\t\t\t\tif (func) {\n\t\t\t\t\t\t\t\tresp.result = func(data.data, source);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow 'method not found';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tresp.error = 'wormhole.cors.' + data.cmd + ': ' + err.toString();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcors(evt.source).send(resp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcors.emit('data', [data, source]);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tcors.emit('error', err);\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// Подмешиваем\n\tEmitter.apply(cors);\n\n\n\t/* istanbul ignore else */\n\tif (window.addEventListener) {\n\t\twindow.addEventListener('message', _onmessage, false);\n\t} else {\n\t\twindow.attachEvent('onmessage', _onmessage);\n\t}\n\n\n\t// Export\n\treturn cors;\n});\n","define([], function () {\n\tfunction getOwn(obj, prop) {\n\t\treturn !(prop in getOwn) && obj && obj.hasOwnProperty(prop) ? obj[prop] : null;\n\t}\n\n\t// Export\n\treturn getOwn;\n});\n"],"sourceRoot":""}